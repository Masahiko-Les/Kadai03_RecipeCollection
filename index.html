<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>料理クエスト</title>
  <script src="js/jquery-2.1.3.min.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
<h1>料理クエスト</h1>

  <main>
    <div class="input-area">
      <input id="title" type="text" placeholder="タイトルを入力">
      <!-- 画像を取り込む -->
      <div class="image-upload">
        <label for="image">＋画像を選択してください</label>
      </div>


      <input id="image" type="file" accept="image/*">
      <!-- <textarea id="text" placeholder="本文を入力"></textarea> -->
    </div>

    <div class="button-area">
      <button id="save">セーブ</button>
      <button id="clear">全て削除</button>
    </div>
  </main>

  <ul id="list">
    <!-- ここに追加データが挿入される -->
  </ul>
  <footer>
    Gs
  </footer>
  <!-- 以下にjsを書いていきます -->
  <script>
  // 「画像を選択」ラベルをクリックしたら、ファイル選択ダイアログを開く
  $(".image-upload label").on("click", function() {
    $("#image").click();
  });


    //1.Save クリックイベント
    $("#save").on("click", function () {
      const title = $("#title").val();
      const file = $("#image")[0].files[0];

      if (!title) {
        alert("タイトルを入力してください");
        return;
      }
      if (!file) {
        alert("画像を選択してください");
        return;
      }

      const reader = new FileReader();
      reader.onload = function(e) {
        const imageData = e.target.result;
        // 保存
        localStorage.setItem(title, imageData);

        // 表示
        const html = `
          <li>
        <p>${title}</p>
        <img src="${imageData}" alt="${title}" style="max-width:200px;">
        <button class="update" data-key="${title}">更新</button>
        <button class="delete" data-key="${title}">削除</button>
          </li>
        `;
        $("#list").append(html);

        // 入力欄リセット
        $("#title").val('');
        $("#image").val('');
      };
      reader.readAsDataURL(file);

    });

    // //2.clear クリックイベント
    // $("#clear").on("click", function () {
    //   //ローカルストレージを全削除
    //   localStorage.clear();
    //   //リストを空にする
    //   $("#list").empty();
    // });


    // //3.ページ読み込み：保存データ取得表示
    // for (var i = 0; i < localStorage.length; i++) {
    //   //キーを取得
    //   const key = localStorage.key(i);
    //   //値を取得
    //   const value = localStorage.getItem(key);

    //   //リストに追加
    //   const html = `
    //     <li>
    //       <p>${key}</p>
    //       <p>${value}</p>
    //       <button class="update" data-key="${key}">更新</button>
    //       <button class="delete" data-key="${key}">削除</button>
    //     </li>
    //   `;
    //   $("#list").append(html);
    // }




  </script>
</body>

</html>